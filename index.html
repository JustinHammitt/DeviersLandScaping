<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Deviers's Landscaping & Hauling</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- Lightbox2 CSS -->
  <link href="plugins/lightbox2/css/lightbox.css" rel="stylesheet" />
</head>
<body>
  <header>
    <nav>
      <div class="logo">
        <a href="#home">
          <img src="assets/logo.png" alt="Deviers Logo" />
        </a>
      </div>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#portfolio">Portfolio</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="gallery.html">Gallery</a></li>
      </ul>
    </nav>
  </header>

  <section id="hero">
    <h1>Deviers's Landscaping & Hauling, Your One-Stop Solution.</h1>
    <p>We offer a wide range of services to meet your needs including Lawn Care, Hauling, Gardening, pressure washing, mulch installation, and more.</p>
  </section>

  <section id="quote" class="section-wrapper">
    <h2>Request a Free Quote</h2>
    <div class="quote-box">
      <form action="#" method="post" id="quote-form">
        <div class="input-pair">
          <input type="text" name="firstName" placeholder="First Name" required />
          <input type="text" name="lastName" placeholder="Last Name" required />
        </div>
        <div class="input-pair">
          <input type="tel" name="phone" placeholder="Phone Number" required />
          <input type="email" name="email" placeholder="Email Address" required />
        </div>
        <input type="text" name="address" placeholder="Project Address" required />
        <textarea name="description" placeholder="Describe the work you need completed..." rows="5" required></textarea>
        <div class="full-width">
          <select name="reason" required>
            <option value="" disabled selected>Select Inquiry Reason *</option>
            <option value="Gardening">Gardening</option>
            <option value="Landscaping">Landscaping</option>
            <option value="Mulching">Mulching</option>
            <option value="Leveling">Leveling</option>
            <option value="Pressure Washing">Pressure Washing</option>
          </select>
        </div>
        <div class="full-width">
          <button type="submit">Submit</button>
        </div>
      </form>
    </div>
  </section>

  <section id="portfolio" class="section-wrapper">
    <h2>Portfolio</h2>
    <div class="album-carousel" id="portfolio-gallery"></div>
  </section>

  <section id="about">
    <h2>About Us</h2>
    <p>We are a team of experienced professionals dedicated to providing top-notch landscaping and hauling services to meet your needs. we offer a wide range of services to meet your needs including Lawn Care, Hauling, Gardening, pressure washing, mulch installation, and more at affordable prices.</p>
  </section>

  <section id="services">
    <h2>Our Services</h2>
    <div class="service">
      <h3>Hauling & Junk Removal</h3>
      <p>We provide quick and affordable removal of unwanted items from your home or business.</p>
    </div>
    <div class="service">
      <h3>Landscaping & Lawncare</h3>
      <p>Comprehensive maintenance and beautification of your outdoor spaces.</p>
    </div>
    <div class="service">
      <h3>Garden Design</h3>
      <p>Custom garden planning and installation to match your vision.</p>
    </div>
    <div class="service">
      <h3>Lawn Maintenance</h3>
      <p>Regular mowing, edging, and fertilization to keep your lawn pristine.</p>
    </div>
    <div class="service">
      <h3>Hardscaping</h3>
      <p>Walkways, patios, and retaining walls built to last and impress.</p>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Deviers's Landscaping & Hauling. All rights reserved.</p>
  </footer>

  <!-- Lightbox2 JS -->
  <script src="plugins/lightbox2/js/lightbox-plus-jquery.js"></script>

  <!-- Quote form submit (keep yours) -->
  <script>
    const quoteForm = document.getElementById("quote-form");

    // TODO: replace with your deployed Google Apps Script URL
    const SCRIPT_URL = "https://script.google.com/macros/s/PASTE-YOURS-HERE/exec";

    quoteForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(quoteForm);

      // optional: show a "sending" state
      const btn = quoteForm.querySelector("button[type='submit']");
      const originalText = btn.textContent;
      btn.disabled = true;
      btn.textContent = "Sending...";

      try {
        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          body: formData,
        });

        const data = await res.json();

        if (data.status === "success") {
          alert("Thanks! Your quote request was sent.");
          quoteForm.reset();
        } else {
          alert("Something went wrong submitting the form. Please try again.");
        }
      } catch (err) {
        console.error(err);
        alert("Network error. Please try again.");
      } finally {
        btn.disabled = false;
        btn.textContent = originalText;
      }
    });
  </script>

  <!-- NEW: homepage gallery built from galleryData.json -->
  <script>
    (async function () {
      const galleryContainer = document.getElementById("portfolio-gallery");
      if (!galleryContainer) return;

      let json;
      try {
        // adjust path if yours lives in /data/galleryData.json
        const res = await fetch("./galleryData.json");
        json = await res.json();
      } catch (err) {
        console.warn("[Deviers] Could not load galleryData.json, using fallback.", err);
        json = null;
      }

      function renderFromImages(images) {
        const maxItems = 6;
        galleryContainer.innerHTML = "";

        // randomize
        const shuffled = images.sort(() => Math.random() - 0.5);
        const picked = shuffled.slice(0, maxItems);

        picked.forEach((imgObj, idx) => {
          const title =
            imgObj.title ||
            imgObj.name ||
            imgObj.caption ||
            imgObj.folder ||
            `Job #${idx + 1}`;

          const src =
            imgObj.url ||
            imgObj.thumb ||
            imgObj.thumbnail ||
            "assets/placeholder.jpg";

          const card = document.createElement("div");
          card.className = "album";

          const a = document.createElement("a");
          a.href = src;
          a.setAttribute("data-lightbox", "homepage");
          a.setAttribute("data-title", title);

          const img = document.createElement("img");
          img.src = src;
          img.alt = title;

          a.appendChild(img);
          card.appendChild(a);

          const cap = document.createElement("p");
          cap.textContent = title;
          card.appendChild(cap);

          galleryContainer.appendChild(card);
        });
      }

      if (json) {
        // galleryData.json is likely shaped like:
        // { "2025-01-15": [ {...}, {...} ], "2025-01-20": [ ... ] }
        const buckets = Object.values(json);
        const allImages = buckets.flat();
        if (allImages.length) {
          renderFromImages(allImages);
          return;
        }
      }

      // fallback if JSON empty/missing
      renderFromImages([
        { name: "Mulch install – sample", url: "assets/gallery/mulch/1.jpg" },
        { name: "Cleanup – sample", url: "assets/gallery/cleanup/1.jpg" },
        { name: "Yard leveling – sample", url: "assets/gallery/yards/1.jpg" },
        { name: "Skid steer – sample", url: "assets/gallery/skidsteer/1.jpg" },
        { name: "Hauling – sample", url: "assets/gallery/hauling/1.jpg" },
        { name: "Pressure washing – sample", url: "assets/gallery/pressure/1.jpg" }
      ]);
    })();
  </script>

</body>
</html>
